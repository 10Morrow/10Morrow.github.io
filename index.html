<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Game</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.60.0/phaser.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script>
        const config = {
            type: Phaser.AUTO,
            width: window.innerWidth,
            height: window.innerHeight,
            physics: {
                default: 'arcade',
                arcade: { gravity: { y: 0 }, debug: false }
            },
            scene: { preload, create, update }
        };

        let player, cursors;
        let moveX = 0, moveY = 0; // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞

        const game = new Phaser.Game(config);

        function preload() {
            this.load.image('background', 'https://i.imgur.com/rUXe2Db.jpeg'); // –§–æ–Ω
            this.load.image('player', 'https://i.ibb.co/HDqC4Wvp/pixelplayer.png'); // –ò–≥—Ä–æ–∫
        }

        function create() {
            this.add.image(window.innerWidth / 2, window.innerHeight / 2, 'background')
                .setDisplaySize(window.innerWidth, window.innerHeight); // –î–µ–ª–∞–µ–º —Ñ–æ–Ω –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

            // –î–æ–±–∞–≤–ª—è–µ–º –∏–≥—Ä–æ–∫–∞
            player = this.physics.add.sprite(window.innerWidth / 2, window.innerHeight / 2, 'player');
            player.setCollideWorldBounds(true); // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≥—Ä–∞–Ω–∏—Ü–∞–º —ç–∫—Ä–∞–Ω–∞

            // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
            cursors = this.input.keyboard.createCursorKeys();

            // üéÆ –î–æ–±–∞–≤–ª—è–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            this.input.on('pointerdown', function (pointer) {
                if (pointer.x < window.innerWidth / 3) moveX = -1;
                else if (pointer.x > (window.innerWidth / 3) * 2) moveX = 1;
                else moveX = 0;

                if (pointer.y < window.innerHeight / 3) moveY = -1;
                else if (pointer.y > (window.innerHeight / 3) * 2) moveY = 1;
                else moveY = 0;
            });

            this.input.on('pointerup', function () {
                moveX = 0;
                moveY = 0;
            });
        }

        function update() {
            const speed = 200;
            let velocityX = 0;
            let velocityY = 0;

            // –ü–ö-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            if (cursors.left.isDown) velocityX = -speed;
            if (cursors.right.isDown) velocityX = speed;
            if (cursors.up.isDown) velocityY = -speed;
            if (cursors.down.isDown) velocityY = speed;

            // –ú–æ–±–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
            velocityX += moveX * speed;
            velocityY += moveY * speed;

            // –§–∏–∫—Å —Ç—Ä—è—Å–∫–∏ (–µ—Å–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç—Å—è, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å)
            if (velocityX === 0 && velocityY === 0) {
                player.setVelocity(0, 0);
            } else {
                player.setVelocity(velocityX, velocityY);
            }
        }
    </script>
</body>
</html>
